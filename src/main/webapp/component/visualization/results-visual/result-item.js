import { __assign, __read } from "tslib";
/**
 * Copyright (c) Codice Foundation
 *
 * This is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser
 * General Public License as published by the Free Software Foundation, either version 3 of the
 * License, or any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without
 * even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
 * Lesser General Public License for more details. A copy of the GNU Lesser General Public License
 * is distributed along with this program and can be found at
 * <http://www.gnu.org/licenses/lgpl.html>.
 *
 **/
import * as React from 'react';
import LazyMetacardInteractions from './lazy-metacard-interactions';
import IconHelper from '../../../js/IconHelper';
import user from '../../singletons/user-instance';
import Button from '@mui/material/Button';
import LinkIcon from '@mui/icons-material/Link';
import GetAppIcon from '@mui/icons-material/GetApp';
import Grid from '@mui/material/Grid';
import { hot } from 'react-hot-loader';
import Paper from '@mui/material/Paper';
import Tooltip from '@mui/material/Tooltip';
import MoreIcon from '@mui/icons-material/MoreVert';
import WarningIcon from '@mui/icons-material/Warning';
import { useBackbone } from '../../selection-checkbox/useBackbone.hook';
import { useRerenderOnBackboneSync, useSelectionOfLazyResult, } from '../../../js/model/LazyQueryResult/hooks';
import Extensions from '../../../extension-points';
import CheckBoxOutlineBlankIcon from '@mui/icons-material/CheckBoxOutlineBlank';
import CheckIcon from '@mui/icons-material/Check';
import CheckBoxIcon from '@mui/icons-material/CheckBox';
import { Elevations } from '../../theme/theme';
import TouchRipple from '@mui/material/ButtonBase/TouchRipple';
import { clearSelection, hasSelection } from './result-item-row';
import { useLazyResultsSelectedResultsFromSelectionInterface } from '../../selection-interface/hooks';
import { TypedUserInstance } from '../../singletons/TypedUser';
import useCoordinateFormat from '../../tabs/metacard/useCoordinateFormat';
import EditIcon from '@mui/icons-material/Edit';
import { Link } from '../../link/link';
import { useMenuState } from '../../menu-state/menu-state';
import Popover from '@mui/material/Popover';
import Common from '../../../js/Common';
import ExtensionPoints from '../../../extension-points/extension-points';
import { StartupDataStore } from '../../../js/model/Startup/startup';
import { useMetacardDefinitions } from '../../../js/model/Startup/metacard-definitions.hooks';
import wreqr from '../../../js/wreqr';
import { useDialog } from '../../dialog';
import { useDownloadComponent } from '../../download/download';
import { LayoutContext } from '../../golden-layout/visual-settings.provider';
import { RESULTS_ATTRIBUTES_LIST, getDefaultResultsShownList, } from '../settings-helpers';
var PropertyComponent = function (props) {
    return (React.createElement("div", __assign({}, props, { className: "overflow-auto", style: {
            marginTop: '10px',
            opacity: '.7',
            maxHeight: '200px',
            minHeight: '21px', // firefox will show scroll bars all the time unless we do this minHeight :S
        } })));
};
var showSource = function () {
    return (StartupDataStore.Configuration.getResultShow().find(function (additionalProperty) {
        return additionalProperty === 'source-id';
    }) !== undefined);
};
var showRelevanceScore = function (_a) {
    var lazyResult = _a.lazyResult;
    return (StartupDataStore.Configuration.getShowRelevanceScores() &&
        lazyResult.hasRelevance());
};
export var getIconClassName = function (_a) {
    var lazyResult = _a.lazyResult;
    if (lazyResult.isRevision()) {
        return 'fa fa-history';
    }
    else if (lazyResult.isResource()) {
        return IconHelper.getClassByMetacardObject(lazyResult.plain);
    }
    else if (lazyResult.isDeleted()) {
        return 'fa fa-trash';
    }
    return IconHelper.getClassByMetacardObject(lazyResult.plain);
};
// @ts-expect-error ts-migrate(6133) FIXME: 'MultiSelectActions' is declared but its value is ... Remove this comment to see the full error message
var MultiSelectActions = function (_a) {
    var selectionInterface = _a.selectionInterface;
    var selectedResults = useLazyResultsSelectedResultsFromSelectionInterface({
        selectionInterface: selectionInterface,
    });
    var selectedResultsArray = Object.values(selectedResults);
    var metacardInteractionMenuState = useMenuState();
    return (React.createElement(React.Fragment, null,
        React.createElement(Button, { component: "div", className: selectedResultsArray.length === 0 ? 'relative' : 'relative', color: "primary", disabled: selectedResultsArray.length === 0, onClick: function (e) {
                e.stopPropagation();
                metacardInteractionMenuState.handleClick();
            }, ref: metacardInteractionMenuState.anchorRef, style: { height: '100%' }, size: "small" },
            selectedResultsArray.length,
            " selected",
            React.createElement(MoreIcon, { className: "Mui-text-text-primary" })),
        React.createElement(Popover, __assign({}, metacardInteractionMenuState.MuiPopoverProps),
            React.createElement(Paper, null,
                React.createElement(LazyMetacardInteractions, { lazyResults: selectedResultsArray, onClose: metacardInteractionMenuState.handleClose })))));
};
var dynamicActionClasses = 'h-full';
var DynamicActions = function (_a) {
    var lazyResult = _a.lazyResult;
    var setProps = useDialog().setProps;
    var metacardInteractionMenuState = useMenuState();
    var DownloadComponent = useDownloadComponent();
    return (React.createElement(Grid, { container: true, direction: "column", wrap: "nowrap", alignItems: "center" },
        React.createElement(Grid, { item: true, className: "h-full" },
            React.createElement(Button, { component: "div", "data-id": "result-item-more-vert-button", onClick: function (e) {
                    e.stopPropagation();
                    metacardInteractionMenuState.handleClick();
                }, style: { height: '100%' }, size: "small", ref: metacardInteractionMenuState.anchorRef },
                React.createElement(MoreIcon, null)),
            React.createElement(Popover, __assign({}, metacardInteractionMenuState.MuiPopoverProps, { keepMounted: true }),
                React.createElement(Paper, null,
                    React.createElement(LazyMetacardInteractions, { lazyResults: [lazyResult], onClose: metacardInteractionMenuState.handleClose })))),
        React.createElement(Grid, { item: true, className: dynamicActionClasses }, lazyResult.hasErrors() ? (React.createElement("div", { "data-id": "validation-errors-icon", className: "h-full", title: "Has validation errors.", "data-help": "Indicates the given result has a validation error.\n                     See the 'Quality' tab of the result for more details." },
            React.createElement(WarningIcon, null))) : ('')),
        React.createElement(Grid, { item: true, className: dynamicActionClasses }, !lazyResult.hasErrors() && lazyResult.hasWarnings() ? (React.createElement("div", { "data-id": "validation-warnings-icon", className: "h-full", title: "Has validation warnings.", "data-help": "Indicates the given result has a validation warning.\n                     See the 'Quality' tab of the result for more details." },
            React.createElement(WarningIcon, null))) : ('')),
        React.createElement(Grid, { item: true, className: dynamicActionClasses }, lazyResult.plain.metacard.properties['ext.link'] ? (React.createElement(Button, { component: "div", title: lazyResult.plain.metacard.properties['ext.link'], onClick: function (e) {
                e.stopPropagation();
                window.open(lazyResult.plain.metacard.properties['ext.link']);
            }, style: { height: '100%' }, size: "small" },
            React.createElement(LinkIcon, null))) : null),
        React.createElement(Grid, { item: true, className: dynamicActionClasses }, lazyResult.getDownloadUrl() ? (React.createElement(Button, { component: "div", "data-id": "download-button", onClick: function (e) {
                e.stopPropagation();
                setProps({
                    open: true,
                    children: React.createElement(DownloadComponent, { lazyResults: [lazyResult] }),
                });
            }, style: { height: '100%' }, size: "small" },
            React.createElement(GetAppIcon, null))) : null),
        React.createElement(Extensions.resultItemTitleAddOn, { lazyResult: lazyResult }),
        React.createElement(Grid, { item: true, className: dynamicActionClasses }, lazyResult.isSearch() ? (React.createElement(Link, { component: Button, "data-id": "edit-button", to: "/search/".concat(lazyResult.plain.id), style: { height: '100%' } },
            React.createElement(EditIcon, null))) : null)));
};
export var SelectionBackground = function (_a) {
    var lazyResult = _a.lazyResult;
    var isSelected = useSelectionOfLazyResult({ lazyResult: lazyResult });
    return (React.createElement("div", { className: "absolute left-0 top-0 z-0 w-full h-full Mui-bg-secondary", style: {
            opacity: isSelected ? 0.05 : 0,
        } }));
};
var IconButton = function (_a) {
    var lazyResult = _a.lazyResult, selectionInterface = _a.selectionInterface, itemContentRef = _a.itemContentRef;
    var MetacardDefinitions = useMetacardDefinitions();
    var isSelected = useSelectionOfLazyResult({ lazyResult: lazyResult });
    var ResultItemAction = ExtensionPoints.resultItemAction({
        lazyResult: lazyResult,
        selectionInterface: selectionInterface,
        itemContentRef: itemContentRef,
        className: 'scale-0 absolute z-10 left-0 -translate-x-full ml-[3px] group-hover:scale-100 transition pt-1',
    });
    var extraClasses = ResultItemAction
        ? 'group-hover:scale-50 group-hover:-translate-x-[85%]'
        : '';
    return (React.createElement(React.Fragment, null,
        ResultItemAction && (React.createElement(ResultItemAction, { lazyResult: lazyResult, selectionInterface: selectionInterface, itemContentRef: itemContentRef })),
        React.createElement(Button, { component: "div", "data-id": "select-checkbox", onClick: function (event) {
                event.stopPropagation(); // this button takes precedence over the enclosing button, and is always additive / subtractive (no deselect of other results)
                if (event.shiftKey) {
                    lazyResult.shiftSelect();
                }
                else {
                    lazyResult.controlSelect();
                }
            }, focusVisibleClassName: "focus-visible", className: "relative p-2 min-w-0 outline-none h-full group/checkbox shrink-0" },
            (function () {
                if (isSelected) {
                    return (React.createElement(React.Fragment, null,
                        React.createElement("div", { className: "".concat(extraClasses, " absolute w-full h-full left-0 top-0 opacity-0 transform transition duration-200 ease-in-out -translate-x-full group-hover/checkbox:scale-100") },
                            React.createElement(CheckBoxIcon, { className: "group-hover/checkbox:block group-focus-visible/checkbox:block hidden" }),
                            React.createElement(CheckIcon, { className: "group-hover/checkbox:hidden group-focus-visible/checkbox:hidden block" })),
                        React.createElement("div", { className: "".concat(extraClasses, " transform transition duration-200 ease-in-out -translate-x-full group-focus-visible/checkbox:!translate-x-0 group-hover/checkbox:!translate-x-0 group-hover/checkbox:scale-100") },
                            React.createElement(CheckBoxIcon, { className: "group-hover/checkbox:block group-focus-visible/checkbox:block hidden" }),
                            React.createElement(CheckIcon, { className: "group-hover/checkbox:hidden group-focus-visible/checkbox:hidden block" }))));
                }
                else if (!isSelected) {
                    return (React.createElement("div", { className: "transform " },
                        React.createElement(CheckBoxOutlineBlankIcon, { className: "group-hover/checkbox:visible group-focus-visible/checkbox:visible invisible" })));
                }
                return null;
            })(),
            React.createElement("span", { className: "".concat(getIconClassName({
                    lazyResult: lazyResult,
                }), " font-awesome-span group-focus-visible/checkbox:invisible group-hover/checkbox:invisible absolute z-0 left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2"), "data-help": MetacardDefinitions.getAlias('title'), title: "".concat(MetacardDefinitions.getAlias('title'), ": ").concat(lazyResult.plain.metacard.properties.title) }))));
};
// factored out for easy debugging (can add bg-gray-400 to see trail)
var diagonalHoverClasses = 'absolute z-50 right-0 bottom-100 h-4 transform scale-0 group-hover:scale-100 transition-all absolute z-50 right-0 bottom-100';
// fake event to pass ripple.stop
var fakeEvent = {
    type: '',
};
export var ResultItem = function (_a) {
    var lazyResult = _a.lazyResult, originalMeasure = _a.measure, selectionInterface = _a.selectionInterface;
    var _b = React.useContext(LayoutContext), getValue = _b.getValue, onStateChanged = _b.onStateChanged;
    var MetacardDefinitions = useMetacardDefinitions();
    var rippleRef = React.useRef(null);
    var listenTo = useBackbone().listenTo;
    var convertToPrecision = function (value) {
        return value && decimalPrecision
            ? Number(value).toFixed(decimalPrecision)
            : value;
    };
    var convertToFormat = useCoordinateFormat();
    var _c = __read(React.useState(false), 2), renderExtras = _c[0], setRenderExtras = _c[1]; // dynamic actions are a significant part of rendering time, so delay until necessary
    var _d = __read(React.useState(TypedUserInstance.getDecimalPrecision()), 2), decimalPrecision = _d[0], setDecimalPrecision = _d[1];
    var _e = __read(React.useState(getValue(RESULTS_ATTRIBUTES_LIST, getDefaultResultsShownList())), 2), shownAttributes = _e[0], setShownAttributes = _e[1];
    useRerenderOnBackboneSync({ lazyResult: lazyResult });
    React.useEffect(function () {
        listenTo(user.get('user').get('preferences'), 'change:decimalPrecision', function () {
            setDecimalPrecision(TypedUserInstance.getDecimalPrecision());
        });
        onStateChanged(function () {
            var shownList = getValue(RESULTS_ATTRIBUTES_LIST, getDefaultResultsShownList());
            setShownAttributes(shownList);
        });
    }, []);
    /**
     * Unfocused (hidden) tab sets the container height to 0
     * Run the measure function when the height is 0 could cause items inside the tab to be unreadable
     */
    var measure = function () {
        var _a, _b;
        if (((_a = buttonRef.current) === null || _a === void 0 ? void 0 : _a.clientHeight) &&
            ((_b = buttonRef.current) === null || _b === void 0 ? void 0 : _b.clientHeight) > 0) {
            originalMeasure();
        }
    };
    React.useEffect(function () {
        measure();
    }, [shownAttributes, convertToFormat]);
    listenTo(wreqr.vent, 'activeContentItemChanged', function () {
        measure();
    });
    var thumbnail = lazyResult.plain.metacard.properties.thumbnail;
    var imgsrc = Common.getImageSrc(thumbnail);
    var buttonRef = React.useRef(null);
    var itemContentRef = React.useRef(null);
    var ResultItemAddOnInstance = Extensions.resultItemRowAddOn({
        lazyResult: lazyResult,
        isTableView: false,
    });
    var ResultTitleIconAddOnInstance = Extensions.resultTitleIconAddOn({
        lazyResult: lazyResult,
    });
    var shouldShowRelevance = showRelevanceScore({ lazyResult: lazyResult });
    var shouldShowSource = showSource();
    var extraHighlights = Object.keys(lazyResult.highlights).filter(function (attr) { return !shownAttributes.find(function (shownAttribute) { return shownAttribute === attr; }); });
    var getDisplayValue = function (_a) {
        var detail = _a.detail, lazyResult = _a.lazyResult;
        var value = lazyResult.plain.metacard.properties[detail];
        if (value && MetacardDefinitions.getAttributeMap()[detail]) {
            switch (MetacardDefinitions.getAttributeMap()[detail].type) {
                case 'DATE':
                    if (value.constructor === Array) {
                        value = value.map(function (val) {
                            return TypedUserInstance.getMomentDate(val);
                        });
                    }
                    else {
                        value = TypedUserInstance.getMomentDate(value);
                    }
                    break;
                case 'GEOMETRY':
                    value = convertToFormat(value);
                case 'LONG':
                case 'DOUBLE':
                case 'FLOAT':
                    value = convertToPrecision(value);
            }
        }
        if (Array.isArray(value)) {
            value = value.join(', ');
        }
        return value;
    };
    var detailsMap = shownAttributes
        .slice(1) // remove top one since that's special
        .map(function (detail) {
        return {
            attribute: detail,
            value: getDisplayValue({ detail: detail, lazyResult: lazyResult }),
        };
    })
        .filter(function (detail) {
        // this is special and is handled differently, see show source
        if (detail.attribute === 'source-id') {
            return false;
        }
        return detail.value;
    });
    return (React.createElement("button", { "data-id": "result-item-container-button", onMouseDown: function (event) {
            /**
             * Shift key can cause selections since we set the class to allow text selection,
             * so the only scenario we want to prevent that in is when shift clicking
             */
            if (event.shiftKey) {
                clearSelection();
            }
            /**
             * Stop the ripple that starts on focus, that's only for navigating by keyboard
             */
            setTimeout(function () {
                if (rippleRef.current) {
                    rippleRef.current.stop(fakeEvent);
                }
            }, 0);
        }, onClick: function (event) {
            if (hasSelection()) {
                return;
            }
            if (event.shiftKey) {
                lazyResult.shiftSelect();
            }
            else if (event.ctrlKey || event.metaKey) {
                lazyResult.controlSelect();
            }
            else {
                lazyResult.select();
            }
            if (rippleRef.current) {
                rippleRef.current.start(event);
            }
            setTimeout(function () {
                if (rippleRef.current) {
                    rippleRef.current.stop(fakeEvent);
                }
            }, 200);
        }, onMouseLeave: function () {
            /**
             * This is to prevent weirdness with the dynamic actions, where clicking a menu option there adds focus,
             * thus making the dynamic actions stay visible when the user starts to mouse away.
             */
            try {
                if (document.activeElement &&
                    buttonRef.current &&
                    buttonRef.current.contains(document.activeElement)) {
                    ;
                    document.activeElement.blur();
                }
            }
            catch (err) {
                console.error(err);
            }
        }, onMouseEnter: function () {
            setRenderExtras(true);
        }, onFocus: function (e) {
            setRenderExtras(true);
            if (e.target === e.currentTarget && rippleRef.current) {
                rippleRef.current.pulsate();
            }
        }, onBlur: function (e) {
            if (rippleRef.current) {
                rippleRef.current.stop(e);
            }
        }, ref: buttonRef, className: "select-text outline-none px-6 pr-12 p-2 text-left break-words group w-full Mui-bg-button" },
        React.createElement("div", { className: "w-full" },
            React.createElement(TouchRipple, { ref: rippleRef }),
            React.createElement(SelectionBackground, { lazyResult: lazyResult }),
            React.createElement("div", { className: "w-full relative z-0", ref: itemContentRef },
                React.createElement("div", { className: "w-full flex items-start" },
                    React.createElement(IconButton, { lazyResult: lazyResult, selectionInterface: selectionInterface, itemContentRef: itemContentRef }),
                    ResultTitleIconAddOnInstance && (React.createElement("div", { className: "pt-2 pr-1" }, ResultTitleIconAddOnInstance)),
                    React.createElement("div", { "data-id": "result-item-".concat(shownAttributes[0], "-label"), title: "".concat(MetacardDefinitions.getAlias(shownAttributes[0])), className: "shrink-1 w-full overflow-auto self-center", style: { maxHeight: '200px', minHeight: '21px' } }, shownAttributes[0] === 'thumbnail' && thumbnail ? (React.createElement("img", { "data-id": "result-item-thumbnail", src: imgsrc, style: { maxWidth: '100%', maxHeight: '200px' }, onLoad: function () {
                            measure();
                        }, onError: function () {
                            measure();
                        } })) : lazyResult.highlights[shownAttributes[0]] ? (React.createElement("span", { dangerouslySetInnerHTML: {
                            __html: lazyResult.highlights[shownAttributes[0]][0].highlight,
                        } })) : (getDisplayValue({ detail: shownAttributes[0], lazyResult: lazyResult })))),
                React.createElement("div", { className: "pl-3 ".concat(ResultItemAddOnInstance !== null ||
                        detailsMap.length > 0 ||
                        extraHighlights.length > 0 ||
                        shouldShowRelevance ||
                        shouldShowSource
                        ? 'pb-2'
                        : '') },
                    React.createElement("div", null, ResultItemAddOnInstance),
                    React.createElement("div", null,
                        detailsMap.map(function (detail) {
                            if (detail.attribute === 'thumbnail') {
                                return (React.createElement("img", { key: detail.attribute, "data-id": "result-item-thumbnail", src: imgsrc, style: {
                                        marginTop: '10px',
                                        maxWidth: '100%',
                                        maxHeight: '200px',
                                    }, onLoad: function () {
                                        measure();
                                    }, onError: function () {
                                        measure();
                                    } }));
                            }
                            return (React.createElement(PropertyComponent, { key: detail.attribute, "data-help": MetacardDefinitions.getAlias(detail.attribute), title: "".concat(MetacardDefinitions.getAlias(detail.attribute), ": ").concat(detail.value) },
                                React.createElement("span", null, lazyResult.highlights[detail.attribute] ? (React.createElement("span", { dangerouslySetInnerHTML: {
                                        __html: lazyResult.highlights[detail.attribute][0]
                                            .highlight,
                                    } })) : (getDisplayValue({
                                    detail: detail.attribute,
                                    lazyResult: lazyResult,
                                })))));
                        }),
                        extraHighlights.map(function (extraHighlight) {
                            var relevantHighlight = lazyResult.highlights[extraHighlight][0];
                            return (React.createElement(PropertyComponent, { key: relevantHighlight.attribute, "data-help": MetacardDefinitions.getAlias(relevantHighlight.attribute) },
                                React.createElement(Tooltip, { title: MetacardDefinitions.getAlias(relevantHighlight.attribute) },
                                    React.createElement("span", { dangerouslySetInnerHTML: {
                                            __html: relevantHighlight.highlight,
                                        } }))));
                        }),
                        shouldShowRelevance ? (React.createElement(PropertyComponent, { "data-help": "Relevance: ".concat(lazyResult.plain.relevance), title: "Relevance: ".concat(lazyResult.plain.relevance) },
                            React.createElement("span", null, lazyResult.getRoundedRelevance()))) : (''),
                        shouldShowSource ? (React.createElement(PropertyComponent, { title: "".concat(MetacardDefinitions.getAlias('source-id'), ": ").concat(lazyResult.plain.metacard.properties['source-id']), "data-help": MetacardDefinitions.getAlias('source-id') }, !lazyResult.isRemote() ? (React.createElement(React.Fragment, null,
                            React.createElement("span", { className: "fa fa-home" }),
                            React.createElement("span", { style: { marginLeft: '5px' } }, "local"))) : (React.createElement(React.Fragment, null,
                            React.createElement("span", { className: "fa fa-cloud" }),
                            React.createElement("span", { style: { marginLeft: '5px' } }, lazyResult.plain.metacard.properties['source-id']))))) : ('')))),
            renderExtras ? (React.createElement(React.Fragment, null,
                ' ',
                React.createElement("div", { className: "".concat(diagonalHoverClasses, " w-full transform translate-y-1") }),
                React.createElement("div", { className: "".concat(diagonalHoverClasses, " w-9/12 transform translate-y-2 ") }),
                React.createElement("div", { className: "".concat(diagonalHoverClasses, " w-6/12 transform translate-y-3") }),
                React.createElement("div", { className: "".concat(diagonalHoverClasses, " w-5/12 transform translate-y-4") }),
                React.createElement("div", { className: "".concat(diagonalHoverClasses, " w-4/12 transform translate-y-5") }),
                React.createElement("div", { className: "".concat(diagonalHoverClasses, " w-3/12 transform translate-y-6") }),
                React.createElement("div", { className: "".concat(diagonalHoverClasses, " w-2/12 transform translate-y-8") }),
                React.createElement("div", { className: "absolute z-40 group-hover:z-50 focus-within:z-50 right-0 top-0 focus-within:opacity-100 group-hover:opacity-100 hover:opacity-100 opacity-0 cursor-auto transform focus-within:scale-100 transition-all hover:scale-100 ease-in-out duration-200 hover:translate-x-0 hover:scale-x-100" },
                    React.createElement(Paper, { onClick: function (e) {
                            e.stopPropagation();
                        }, elevation: Elevations.overlays, className: "p-2" },
                        React.createElement(DynamicActions, { lazyResult: lazyResult }))))) : null)));
};
export default hot(module)(ResultItem);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzdWx0LWl0ZW0uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9zcmMvbWFpbi93ZWJhcHAvY29tcG9uZW50L3Zpc3VhbGl6YXRpb24vcmVzdWx0cy12aXN1YWwvcmVzdWx0LWl0ZW0udHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7OztJQWFJO0FBQ0osT0FBTyxLQUFLLEtBQUssTUFBTSxPQUFPLENBQUE7QUFDOUIsT0FBTyx3QkFBd0IsTUFBTSw4QkFBOEIsQ0FBQTtBQUNuRSxPQUFPLFVBQVUsTUFBTSx3QkFBd0IsQ0FBQTtBQUMvQyxPQUFPLElBQUksTUFBTSxnQ0FBZ0MsQ0FBQTtBQUNqRCxPQUFPLE1BQU0sTUFBTSxzQkFBc0IsQ0FBQTtBQUN6QyxPQUFPLFFBQVEsTUFBTSwwQkFBMEIsQ0FBQTtBQUMvQyxPQUFPLFVBQVUsTUFBTSw0QkFBNEIsQ0FBQTtBQUNuRCxPQUFPLElBQUksTUFBTSxvQkFBb0IsQ0FBQTtBQUNyQyxPQUFPLEVBQUUsR0FBRyxFQUFFLE1BQU0sa0JBQWtCLENBQUE7QUFDdEMsT0FBTyxLQUFLLE1BQU0scUJBQXFCLENBQUE7QUFDdkMsT0FBTyxPQUFPLE1BQU0sdUJBQXVCLENBQUE7QUFDM0MsT0FBTyxRQUFRLE1BQU0sOEJBQThCLENBQUE7QUFDbkQsT0FBTyxXQUFXLE1BQU0sNkJBQTZCLENBQUE7QUFDckQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLDJDQUEyQyxDQUFBO0FBRXZFLE9BQU8sRUFDTCx5QkFBeUIsRUFDekIsd0JBQXdCLEdBQ3pCLE1BQU0seUNBQXlDLENBQUE7QUFDaEQsT0FBTyxVQUFVLE1BQU0sMkJBQTJCLENBQUE7QUFDbEQsT0FBTyx3QkFBd0IsTUFBTSwwQ0FBMEMsQ0FBQTtBQUMvRSxPQUFPLFNBQVMsTUFBTSwyQkFBMkIsQ0FBQTtBQUNqRCxPQUFPLFlBQVksTUFBTSw4QkFBOEIsQ0FBQTtBQUN2RCxPQUFPLEVBQUUs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QUNMLENBQ0osQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUNKLENBQ0MsQ0FDVixDQUFBO0FBQ0gsQ0FBQyxDQUFBO0FBQ0QsZUFBZSxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgQ29kaWNlIEZvdW5kYXRpb25cbiAqXG4gKiBUaGlzIGlzIGZyZWUgc29mdHdhcmU6IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgTGVzc2VyXG4gKiBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZVxuICogTGljZW5zZSwgb3IgYW55IGxhdGVyIHZlcnNpb24uXG4gKlxuICogVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dFxuICogZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuIFNlZSB0aGUgR05VXG4gKiBMZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLiBBIGNvcHkgb2YgdGhlIEdOVSBMZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZVxuICogaXMgZGlzdHJpYnV0ZWQgYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0gYW5kIGNhbiBiZSBmb3VuZCBhdFxuICogPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy9sZ3BsLmh0bWw+LlxuICpcbiAqKi9cbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IExhenlNZXRhY2FyZEludGVyYWN0aW9ucyBmcm9tICcuL2xhenktbWV0YWNhcmQtaW50ZXJhY3Rpb25zJ1xuaW1wb3J0IEljb25IZWxwZXIgZnJvbSAnLi4vLi4vLi4vanMvSWNvbkhlbHBlcidcbmltcG9ydCB1c2VyIGZyb20gJy4uLy4uL3NpbmdsZXRvbnMvdXNlci1pbnN0YW5jZSdcbmltcG9ydCBCdXR0b24gZnJvbSAnQG11aS9tYXRlcmlhbC9CdXR0b24nXG5pbXBvcnQgTGlua0ljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9MaW5rJ1xuaW1wb3J0IEdldEFwcEljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9HZXRBcHAnXG5pbXBvcnQgR3JpZCBmcm9tICdAbXVpL21hdGVyaWFsL0dyaWQnXG5pbXBvcnQgeyBob3QgfSBmcm9tICdyZWFjdC1ob3QtbG9hZGVyJ1xuaW1wb3J0IFBhcGVyIGZyb20gJ0BtdWkvbWF0ZXJpYWwvUGFwZXInXG5pbXBvcnQgVG9vbHRpcCBmcm9tICdAbXVpL21hdGVyaWFsL1Rvb2x0aXAnXG5pbXBvcnQgTW9yZUljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9Nb3JlVmVydCdcbmltcG9ydCBXYXJuaW5nSWNvbiBmcm9tICdAbXVpL2ljb25zLW1hdGVyaWFsL1dhcm5pbmcnXG5pbXBvcnQgeyB1c2VCYWNrYm9uZSB9IGZyb20gJy4uLy4uL3NlbGVjdGlvbi1jaGVja2JveC91c2VCYWNrYm9uZS5ob29rJ1xuaW1wb3J0IHsgTGF6eVF1ZXJ5UmVzdWx0IH0gZnJvbSAnLi4vLi4vLi4vanMvbW9kZWwvTGF6eVF1ZXJ5UmVzdWx0L0xhenlRdWVyeVJlc3VsdCdcbmltcG9ydCB7XG4gIHVzZVJlcmVuZGVyT25CYWNrYm9uZVN5bmMsXG4gIHVzZVNlbGVjdGlvbk9mTGF6eVJlc3VsdCxcbn0gZnJvbSAnLi4vLi4vLi4vanMvbW9kZWwvTGF6eVF1ZXJ5UmVzdWx0L2hvb2tzJ1xuaW1wb3J0IEV4dGVuc2lvbnMgZnJvbSAnLi4vLi4vLi4vZXh0ZW5zaW9uLXBvaW50cydcbmltcG9ydCBDaGVja0JveE91dGxpbmVCbGFua0ljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9DaGVja0JveE91dGxpbmVCbGFuaydcbmltcG9ydCBDaGVja0ljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9DaGVjaydcbmltcG9ydCBDaGVja0JveEljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9DaGVja0JveCdcbmltcG9ydCB7IEVsZXZhdGlvbnMgfSBmcm9tICcuLi8uLi90aGVtZS90aGVtZSdcbmltcG9ydCBUb3VjaFJpcHBsZSBmcm9tICdAbXVpL21hdGVyaWFsL0J1dHRvbkJhc2UvVG91Y2hSaXBwbGUnXG5pbXBvcnQgeyBjbGVhclNlbGVjdGlvbiwgaGFzU2VsZWN0aW9uIH0gZnJvbSAnLi9yZXN1bHQtaXRlbS1yb3cnXG5pbXBvcnQgeyB1c2VMYXp5UmVzdWx0c1NlbGVjdGVkUmVzdWx0c0Zyb21TZWxlY3Rpb25JbnRlcmZhY2UgfSBmcm9tICcuLi8uLi9zZWxlY3Rpb24taW50ZXJmYWNlL2hvb2tzJ1xuaW1wb3J0IHsgVHlwZWRVc2VySW5zdGFuY2UgfSBmcm9tICcuLi8uLi9zaW5nbGV0b25zL1R5cGVkVXNlcidcbmltcG9ydCB1c2VDb29yZGluYXRlRm9ybWF0IGZyb20gJy4uLy4uL3RhYnMvbWV0YWNhcmQvdXNlQ29vcmRpbmF0ZUZvcm1hdCdcbmltcG9ydCBFZGl0SWNvbiBmcm9tICdAbXVpL2ljb25zLW1hdGVyaWFsL0VkaXQnXG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAnLi4vLi4vbGluay9saW5rJ1xuaW1wb3J0IHsgdXNlTWVudVN0YXRlIH0gZnJvbSAnLi4vLi4vbWVudS1zdGF0ZS9tZW51LXN0YXRlJ1xuaW1wb3J0IFBvcG92ZXIgZnJvbSAnQG11aS9tYXRlcmlhbC9Qb3BvdmVyJ1xuaW1wb3J0IENvbW1vbiBmcm9tICcuLi8uLi8uLi9qcy9Db21tb24nXG5pbXBvcnQgRXh0ZW5zaW9uUG9pbnRzIGZyb20gJy4uLy4uLy4uL2V4dGVuc2lvbi1wb2ludHMvZXh0ZW5zaW9uLXBvaW50cydcbmltcG9ydCB7IFN0YXJ0dXBEYXRhU3RvcmUgfSBmcm9tICcuLi8uLi8uLi9qcy9tb2RlbC9TdGFydHVwL3N0YXJ0dXAnXG5pbXBvcnQgeyB1c2VNZXRhY2FyZERlZmluaXRpb25zIH0gZnJvbSAnLi4vLi4vLi4vanMvbW9kZWwvU3RhcnR1cC9tZXRhY2FyZC1kZWZpbml0aW9ucy5ob29rcydcbmltcG9ydCB3cmVxciBmcm9tICcuLi8uLi8uLi9qcy93cmVxcidcbmltcG9ydCB7IHVzZURpYWxvZyB9IGZyb20gJy4uLy4uL2RpYWxvZydcbmltcG9ydCB7IHVzZURvd25sb2FkQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vZG93bmxvYWQvZG93bmxvYWQnXG5pbXBvcnQgeyBMYXlvdXRDb250ZXh0IH0gZnJvbSAnLi4vLi4vZ29sZGVuLWxheW91dC92aXN1YWwtc2V0dGluZ3MucHJvdmlkZXInXG5pbXBvcnQge1xuICBSRVNVTFRTX0FUVFJJQlVURVNfTElTVCxcbiAgZ2V0RGVmYXVsdFJlc3VsdHNTaG93bkxpc3QsXG59IGZyb20gJy4uL3NldHRpbmdzLWhlbHBlcnMnXG5cbmNvbnN0IFByb3BlcnR5Q29tcG9uZW50ID0gKHByb3BzOiBSZWFjdC5BbGxIVE1MQXR0cmlidXRlczxIVE1MRGl2RWxlbWVudD4pID0+IHtcbiAgcmV0dXJuIChcbiAgICA8ZGl2XG4gICAgICB7Li4ucHJvcHN9XG4gICAgICBjbGFzc05hbWU9XCJvdmVyZmxvdy1hdXRvXCJcbiAgICAgIHN0eWxlPXt7XG4gICAgICAgIG1hcmdpblRvcDogJzEwcHgnLFxuICAgICAgICBvcGFjaXR5OiAnLjcnLFxuICAgICAgICBtYXhIZWlnaHQ6ICcyMDBweCcsXG4gICAgICAgIG1pbkhlaWdodDogJzIxcHgnLCAvLyBmaXJlZm94IHdpbGwgc2hvdyBzY3JvbGwgYmFycyBhbGwgdGhlIHRpbWUgdW5sZXNzIHdlIGRvIHRoaXMgbWluSGVpZ2h0IDpTXG4gICAgICB9fVxuICAgIC8+XG4gIClcbn1cbnR5cGUgUmVzdWx0SXRlbUJhc2ljUHJvcHMgPSB7XG4gIGxhenlSZXN1bHRzOiBMYXp5UXVlcnlSZXN1bHRbXVxuICBsYXp5UmVzdWx0OiBMYXp5UXVlcnlSZXN1bHRcbiAgc2VsZWN0aW9uSW50ZXJmYWNlOiBhbnlcbn1cbnR5cGUgUmVzdWx0SXRlbUZ1bGxQcm9wcyA9IFJlc3VsdEl0ZW1CYXNpY1Byb3BzICYge1xuICBtZWFzdXJlOiAoKSA9PiB2b2lkXG4gIGluZGV4OiBudW1iZXJcbiAgd2lkdGg6IG51bWJlclxufVxuY29uc3Qgc2hvd1NvdXJjZSA9ICgpID0+IHtcbiAgcmV0dXJuIChcbiAgICBTdGFydHVwRGF0YVN0b3JlLkNvbmZpZ3VyYXRpb24uZ2V0UmVzdWx0U2hvdygpLmZpbmQoXG4gICAgICAoYWRkaXRpb25hbFByb3BlcnR5OiBzdHJpbmcpID0+IHtcbiAgICAgICAgcmV0dXJuIGFkZGl0aW9uYWxQcm9wZXJ0eSA9PT0gJ3NvdXJjZS1pZCdcbiAgICAgIH1cbiAgICApICE9PSB1bmRlZmluZWRcbiAgKVxufVxuY29uc3Qgc2hvd1JlbGV2YW5jZVNjb3JlID0gKHtcbiAgbGF6eVJlc3VsdCxcbn06IHtcbiAgbGF6eVJlc3VsdDogUmVzdWx0SXRlbUJhc2ljUHJvcHNbJ2xhenlSZXN1bHQnXVxufSkgPT4ge1xuICByZXR1cm4gKFxuICAgIFN0YXJ0dXBEYXRhU3RvcmUuQ29uZmlndXJhdGlvbi5nZXRTaG93UmVsZXZhbmNlU2NvcmVzKCkgJiZcbiAgICBsYXp5UmVzdWx0Lmhhc1JlbGV2YW5jZSgpXG4gIClcbn1cbmV4cG9ydCBjb25zdCBnZXRJY29uQ2xhc3NOYW1lID0gKHtcbiAgbGF6eVJlc3VsdCxcbn06IHtcbiAgbGF6eVJlc3VsdDogTGF6eVF1ZXJ5UmVzdWx0XG59KSA9PiB7XG4gIGlmIChsYXp5UmVzdWx0LmlzUmV2aXNpb24oKSkge1xuICAgIHJldHVybiAnZmEgZmEtaGlzdG9yeSdcbiAgfSBlbHNlIGlmIChsYXp5UmVzdWx0LmlzUmVzb3VyY2UoKSkge1xuICAgIHJldHVybiBJY29uSGVscGVyLmdldENsYXNzQnlNZXRhY2FyZE9iamVjdChsYXp5UmVzdWx0LnBsYWluKVxuICB9IGVsc2UgaWYgKGxhenlSZXN1bHQuaXNEZWxldGVkKCkpIHtcbiAgICByZXR1cm4gJ2ZhIGZhLXRyYXNoJ1xuICB9XG4gIHJldHVybiBJY29uSGVscGVyLmdldENsYXNzQnlNZXRhY2FyZE9iamVjdChsYXp5UmVzdWx0LnBsYWluKVxufVxuLy8gQHRzLWV4cGVjdC1lcnJvciB0cy1taWdyYXRlKDYxMzMpIEZJWE1FOiAnTXVsdGlTZWxlY3RBY3Rpb25zJyBpcyBkZWNsYXJlZCBidXQgaXRzIHZhbHVlIGlzIC4uLiBSZW1vdmUgdGhpcyBjb21tZW50IHRvIHNlZSB0aGUgZnVsbCBlcnJvciBtZXNzYWdlXG5jb25zdCBNdWx0aVNlbGVjdEFjdGlvbnMgPSAoe1xuICBzZWxlY3Rpb25JbnRlcmZhY2UsXG59OiB7XG4gIHNlbGVjdGlvbkludGVyZmFjZTogYW55XG59KSA9PiB7XG4gIGNvbnN0IHNlbGVjdGVkUmVzdWx0cyA9IHVzZUxhenlSZXN1bHRzU2VsZWN0ZWRSZXN1bHRzRnJvbVNlbGVjdGlvbkludGVyZmFjZSh7XG4gICAgc2VsZWN0aW9uSW50ZXJmYWNlLFxuICB9KVxuICBjb25zdCBzZWxlY3RlZFJlc3VsdHNBcnJheSA9IE9iamVjdC52YWx1ZXMoc2VsZWN0ZWRSZXN1bHRzKVxuICBjb25zdCBtZXRhY2FyZEludGVyYWN0aW9uTWVudVN0YXRlID0gdXNlTWVudVN0YXRlKClcbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPEJ1dHRvblxuICAgICAgICBjb21wb25lbnQ9XCJkaXZcIlxuICAgICAgICBjbGFzc05hbWU9e3NlbGVjdGVkUmVzdWx0c0FycmF5Lmxlbmd0aCA9PT0gMCA/ICdyZWxhdGl2ZScgOiAncmVsYXRpdmUnfVxuICAgICAgICBjb2xvcj1cInByaW1hcnlcIlxuICAgICAgICBkaXNhYmxlZD17c2VsZWN0ZWRSZXN1bHRzQXJyYXkubGVuZ3RoID09PSAwfVxuICAgICAgICBvbkNsaWNrPXsoZSkgPT4ge1xuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgICAgICBtZXRhY2FyZEludGVyYWN0aW9uTWVudVN0YXRlLmhhbmRsZUNsaWNrKClcbiAgICAgICAgfX1cbiAgICAgICAgcmVmPXttZXRhY2FyZEludGVyYWN0aW9uTWVudVN0YXRlLmFuY2hvclJlZn1cbiAgICAgICAgc3R5bGU9e3sgaGVpZ2h0OiAnMTAwJScgfX1cbiAgICAgICAgc2l6ZT1cInNtYWxsXCJcbiAgICAgID5cbiAgICAgICAge3NlbGVjdGVkUmVzdWx0c0FycmF5Lmxlbmd0aH0gc2VsZWN0ZWRcbiAgICAgICAgPE1vcmVJY29uIGNsYXNzTmFtZT1cIk11aS10ZXh0LXRleHQtcHJpbWFyeVwiIC8+XG4gICAgICA8L0J1dHRvbj5cbiAgICAgIDxQb3BvdmVyIHsuLi5tZXRhY2FyZEludGVyYWN0aW9uTWVudVN0YXRlLk11aVBvcG92ZXJQcm9wc30+XG4gICAgICAgIDxQYXBlcj5cbiAgICAgICAgICA8TGF6eU1ldGFjYXJkSW50ZXJhY3Rpb25zXG4gICAgICAgICAgICBsYXp5UmVzdWx0cz17c2VsZWN0ZWRSZXN1bHRzQXJyYXl9XG4gICAgICAgICAgICBvbkNsb3NlPXttZXRhY2FyZEludGVyYWN0aW9uTWVudVN0YXRlLmhhbmRsZUNsb3NlfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvUGFwZXI+XG4gICAgICA8L1BvcG92ZXI+XG4gICAgPC8+XG4gIClcbn1cbmNvbnN0IGR5bmFtaWNBY3Rpb25DbGFzc2VzID0gJ2gtZnVsbCdcbmNvbnN0IER5bmFtaWNBY3Rpb25zID0gKHsgbGF6eVJlc3VsdCB9OiB7IGxhenlSZXN1bHQ6IExhenlRdWVyeVJlc3VsdCB9KSA9PiB7XG4gIGNvbnN0IHsgc2V0UHJvcHMgfSA9IHVzZURpYWxvZygpXG4gIGNvbnN0IG1ldGFjYXJkSW50ZXJhY3Rpb25NZW51U3RhdGUgPSB1c2VNZW51U3RhdGUoKVxuICBjb25zdCBEb3dubG9hZENvbXBvbmVudCA9IHVzZURvd25sb2FkQ29tcG9uZW50KClcbiAgcmV0dXJuIChcbiAgICA8R3JpZCBjb250YWluZXIgZGlyZWN0aW9uPVwiY29sdW1uXCIgd3JhcD1cIm5vd3JhcFwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIj5cbiAgICAgIDxHcmlkIGl0ZW0gY2xhc3NOYW1lPVwiaC1mdWxsXCI+XG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICBjb21wb25lbnQ9XCJkaXZcIlxuICAgICAgICAgIGRhdGEtaWQ9XCJyZXN1bHQtaXRlbS1tb3JlLXZlcnQtYnV0dG9uXCJcbiAgICAgICAgICBvbkNsaWNrPXsoZTogUmVhY3QuTW91c2VFdmVudDxIVE1MRGl2RWxlbWVudCwgTW91c2VFdmVudD4pID0+IHtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgICAgICAgIG1ldGFjYXJkSW50ZXJhY3Rpb25NZW51U3RhdGUuaGFuZGxlQ2xpY2soKVxuICAgICAgICAgIH19XG4gICAgICAgICAgc3R5bGU9e3sgaGVpZ2h0OiAnMTAwJScgfX1cbiAgICAgICAgICBzaXplPVwic21hbGxcIlxuICAgICAgICAgIHJlZj17bWV0YWNhcmRJbnRlcmFjdGlvbk1lbnVTdGF0ZS5hbmNob3JSZWZ9XG4gICAgICAgID5cbiAgICAgICAgICA8TW9yZUljb24gLz5cbiAgICAgICAgPC9CdXR0b24+XG4gICAgICAgIDxQb3BvdmVyXG4gICAgICAgICAgey4uLm1ldGFjYXJkSW50ZXJhY3Rpb25NZW51U3RhdGUuTXVpUG9wb3ZlclByb3BzfVxuICAgICAgICAgIGtlZXBNb3VudGVkPXt0cnVlfVxuICAgICAgICA+XG4gICAgICAgICAgPFBhcGVyPlxuICAgICAgICAgICAgPExhenlNZXRhY2FyZEludGVyYWN0aW9uc1xuICAgICAgICAgICAgICBsYXp5UmVzdWx0cz17W2xhenlSZXN1bHRdfVxuICAgICAgICAgICAgICBvbkNsb3NlPXttZXRhY2FyZEludGVyYWN0aW9uTWVudVN0YXRlLmhhbmRsZUNsb3NlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L1BhcGVyPlxuICAgICAgICA8L1BvcG92ZXI+XG4gICAgICA8L0dyaWQ+XG4gICAgICA8R3JpZCBpdGVtIGNsYXNzTmFtZT17ZHluYW1pY0FjdGlvbkNsYXNzZXN9PlxuICAgICAgICB7bGF6eVJlc3VsdC5oYXNFcnJvcnMoKSA/IChcbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBkYXRhLWlkPVwidmFsaWRhdGlvbi1lcnJvcnMtaWNvblwiXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJoLWZ1bGxcIlxuICAgICAgICAgICAgdGl0bGU9XCJIYXMgdmFsaWRhdGlvbiBlcnJvcnMuXCJcbiAgICAgICAgICAgIGRhdGEtaGVscD1cIkluZGljYXRlcyB0aGUgZ2l2ZW4gcmVzdWx0IGhhcyBhIHZhbGlkYXRpb24gZXJyb3IuXG4gICAgICAgICAgICAgICAgICAgICBTZWUgdGhlICdRdWFsaXR5JyB0YWIgb2YgdGhlIHJlc3VsdCBmb3IgbW9yZSBkZXRhaWxzLlwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPFdhcm5pbmdJY29uIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgJydcbiAgICAgICAgKX1cbiAgICAgIDwvR3JpZD5cbiAgICAgIDxHcmlkIGl0ZW0gY2xhc3NOYW1lPXtkeW5hbWljQWN0aW9uQ2xhc3Nlc30+XG4gICAgICAgIHshbGF6eVJlc3VsdC5oYXNFcnJvcnMoKSAmJiBsYXp5UmVzdWx0Lmhhc1dhcm5pbmdzKCkgPyAoXG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgZGF0YS1pZD1cInZhbGlkYXRpb24td2FybmluZ3MtaWNvblwiXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJoLWZ1bGxcIlxuICAgICAgICAgICAgdGl0bGU9XCJIYXMgdmFsaWRhdGlvbiB3YXJuaW5ncy5cIlxuICAgICAgICAgICAgZGF0YS1oZWxwPVwiSW5kaWNhdGVzIHRoZSBnaXZlbiByZXN1bHQgaGFzIGEgdmFsaWRhdGlvbiB3YXJuaW5nLlxuICAgICAgICAgICAgICAgICAgICAgU2VlIHRoZSAnUXVhbGl0eScgdGFiIG9mIHRoZSByZXN1bHQgZm9yIG1vcmUgZGV0YWlscy5cIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxXYXJuaW5nSWNvbiAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApIDogKFxuICAgICAgICAgICcnXG4gICAgICAgICl9XG4gICAgICA8L0dyaWQ+XG4gICAgICA8R3JpZCBpdGVtIGNsYXNzTmFtZT17ZHluYW1pY0FjdGlvbkNsYXNzZXN9PlxuICAgICAgICB7bGF6eVJlc3VsdC5wbGFpbi5tZXRhY2FyZC5wcm9wZXJ0aWVzWydleHQubGluayddID8gKFxuICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgIGNvbXBvbmVudD1cImRpdlwiXG4gICAgICAgICAgICB0aXRsZT17bGF6eVJlc3VsdC5wbGFpbi5tZXRhY2FyZC5wcm9wZXJ0aWVzWydleHQubGluayddfVxuICAgICAgICAgICAgb25DbGljaz17KGU6IFJlYWN0Lk1vdXNlRXZlbnQ8SFRNTERpdkVsZW1lbnQsIE1vdXNlRXZlbnQ+KSA9PiB7XG4gICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgICAgICAgICAgd2luZG93Lm9wZW4obGF6eVJlc3VsdC5wbGFpbi5tZXRhY2FyZC5wcm9wZXJ0aWVzWydleHQubGluayddKVxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIHN0eWxlPXt7IGhlaWdodDogJzEwMCUnIH19XG4gICAgICAgICAgICBzaXplPVwic21hbGxcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxMaW5rSWNvbiAvPlxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICApIDogbnVsbH1cbiAgICAgIDwvR3JpZD5cbiAgICAgIDxHcmlkIGl0ZW0gY2xhc3NOYW1lPXtkeW5hbWljQWN0aW9uQ2xhc3Nlc30+XG4gICAgICAgIHtsYXp5UmVzdWx0LmdldERvd25sb2FkVXJsKCkgPyAoXG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgY29tcG9uZW50PVwiZGl2XCJcbiAgICAgICAgICAgIGRhdGEtaWQ9XCJkb3dubG9hZC1idXR0b25cIlxuICAgICAgICAgICAgb25DbGljaz17KGU6IFJlYWN0Lk1vdXNlRXZlbnQ8SFRNTERpdkVsZW1lbnQsIE1vdXNlRXZlbnQ+KSA9PiB7XG4gICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgICAgICAgICAgc2V0UHJvcHMoe1xuICAgICAgICAgICAgICAgIG9wZW46IHRydWUsXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IDxEb3dubG9hZENvbXBvbmVudCBsYXp5UmVzdWx0cz17W2xhenlSZXN1bHRdfSAvPixcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBzdHlsZT17eyBoZWlnaHQ6ICcxMDAlJyB9fVxuICAgICAgICAgICAgc2l6ZT1cInNtYWxsXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8R2V0QXBwSWNvbiAvPlxuICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICApIDogbnVsbH1cbiAgICAgIDwvR3JpZD5cbiAgICAgIDxFeHRlbnNpb25zLnJlc3VsdEl0ZW1UaXRsZUFkZE9uIGxhenlSZXN1bHQ9e2xhenlSZXN1bHR9IC8+XG4gICAgICA8R3JpZCBpdGVtIGNsYXNzTmFtZT17ZHluYW1pY0FjdGlvbkNsYXNzZXN9PlxuICAgICAgICB7bGF6eVJlc3VsdC5pc1NlYXJjaCgpID8gKFxuICAgICAgICAgIDxMaW5rXG4gICAgICAgICAgICBjb21wb25lbnQ9e0J1dHRvbn1cbiAgICAgICAgICAgIGRhdGEtaWQ9XCJlZGl0LWJ1dHRvblwiXG4gICAgICAgICAgICB0bz17YC9zZWFyY2gvJHtsYXp5UmVzdWx0LnBsYWluLmlkfWB9XG4gICAgICAgICAgICBzdHlsZT17eyBoZWlnaHQ6ICcxMDAlJyB9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxFZGl0SWNvbiAvPlxuICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgKSA6IG51bGx9XG4gICAgICA8L0dyaWQ+XG4gICAgICB7LyoqIGFkZCBpbmxpbmUgZWRpdGluZyBsYXRlciAqL31cbiAgICAgIHsvKiA8R3JpZCBpdGVtIGNsYXNzTmFtZT1cImgtZnVsbFwiPlxuICAgICAgICAgICB7bGF6eVJlc3VsdC5pc1NlYXJjaCgpID8gKFxuICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgIGRhdGEtaWQ9XCJlZGl0LWJ1dHRvblwiXG4gICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICBzZXRFZGl0KGxhenlSZXN1bHQpXG4gICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgc3R5bGU9e3sgaGVpZ2h0OiAnMTAwJScgfX1cbiAgICAgICAgICAgICAgIHNpemU9XCJzbWFsbFwiXG4gICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgPEVkaXRJY29uIC8+XG4gICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgPC9HcmlkPiAqL31cbiAgICA8L0dyaWQ+XG4gIClcbn1cbmV4cG9ydCBjb25zdCBTZWxlY3Rpb25CYWNrZ3JvdW5kID0gKHtcbiAgbGF6eVJlc3VsdCxcbn06IHtcbiAgbGF6eVJlc3VsdDogTGF6eVF1ZXJ5UmVzdWx0XG4gIHN0eWxlPzogUmVhY3QuQ1NTUHJvcGVydGllc1xufSkgPT4ge1xuICBjb25zdCBpc1NlbGVjdGVkID0gdXNlU2VsZWN0aW9uT2ZMYXp5UmVzdWx0KHsgbGF6eVJlc3VsdCB9KVxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIGxlZnQtMCB0b3AtMCB6LTAgdy1mdWxsIGgtZnVsbCBNdWktYmctc2Vjb25kYXJ5XCJcbiAgICAgIHN0eWxlPXt7XG4gICAgICAgIG9wYWNpdHk6IGlzU2VsZWN0ZWQgPyAwLjA1IDogMCxcbiAgICAgIH19XG4gICAgLz5cbiAgKVxufVxuY29uc3QgSWNvbkJ1dHRvbiA9ICh7XG4gIGxhenlSZXN1bHQsXG4gIHNlbGVjdGlvbkludGVyZmFjZSxcbiAgaXRlbUNvbnRlbnRSZWYsXG59OiB7XG4gIGxhenlSZXN1bHQ6IExhenlRdWVyeVJlc3VsdFxuICBzZWxlY3Rpb25JbnRlcmZhY2U6IGFueVxuICBpdGVtQ29udGVudFJlZjogUmVhY3QuUmVmT2JqZWN0PEhUTUxFbGVtZW50PlxufSkgPT4ge1xuICBjb25zdCBNZXRhY2FyZERlZmluaXRpb25zID0gdXNlTWV0YWNhcmREZWZpbml0aW9ucygpXG4gIGNvbnN0IGlzU2VsZWN0ZWQgPSB1c2VTZWxlY3Rpb25PZkxhenlSZXN1bHQoeyBsYXp5UmVzdWx0IH0pXG4gIGNvbnN0IFJlc3VsdEl0ZW1BY3Rpb24gPSBFeHRlbnNpb25Qb2ludHMucmVzdWx0SXRlbUFjdGlvbih7XG4gICAgbGF6eVJlc3VsdCxcbiAgICBzZWxlY3Rpb25JbnRlcmZhY2UsXG4gICAgaXRlbUNvbnRlbnRSZWYsXG4gICAgY2xhc3NOYW1lOlxuICAgICAgJ3NjYWxlLTAgYWJzb2x1dGUgei0xMCBsZWZ0LTAgLXRyYW5zbGF0ZS14LWZ1bGwgbWwtWzNweF0gZ3JvdXAtaG92ZXI6c2NhbGUtMTAwIHRyYW5zaXRpb24gcHQtMScsXG4gIH0pXG4gIGNvbnN0IGV4dHJhQ2xhc3NlcyA9IFJlc3VsdEl0ZW1BY3Rpb25cbiAgICA/ICdncm91cC1ob3ZlcjpzY2FsZS01MCBncm91cC1ob3ZlcjotdHJhbnNsYXRlLXgtWzg1JV0nXG4gICAgOiAnJ1xuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICB7UmVzdWx0SXRlbUFjdGlvbiAmJiAoXG4gICAgICAgIDxSZXN1bHRJdGVtQWN0aW9uXG4gICAgICAgICAgbGF6eVJlc3VsdD17bGF6eVJlc3VsdH1cbiAgICAgICAgICBzZWxlY3Rpb25JbnRlcmZhY2U9e3NlbGVjdGlvbkludGVyZmFjZX1cbiAgICAgICAgICBpdGVtQ29udGVudFJlZj17aXRlbUNvbnRlbnRSZWZ9XG4gICAgICAgIC8+XG4gICAgICApfVxuICAgICAgPEJ1dHRvblxuICAgICAgICBjb21wb25lbnQ9XCJkaXZcIlxuICAgICAgICBkYXRhLWlkPVwic2VsZWN0LWNoZWNrYm94XCJcbiAgICAgICAgb25DbGljaz17KGV2ZW50OiBSZWFjdC5Nb3VzZUV2ZW50PEhUTUxEaXZFbGVtZW50LCBNb3VzZUV2ZW50PikgPT4ge1xuICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpIC8vIHRoaXMgYnV0dG9uIHRha2VzIHByZWNlZGVuY2Ugb3ZlciB0aGUgZW5jbG9zaW5nIGJ1dHRvbiwgYW5kIGlzIGFsd2F5cyBhZGRpdGl2ZSAvIHN1YnRyYWN0aXZlIChubyBkZXNlbGVjdCBvZiBvdGhlciByZXN1bHRzKVxuICAgICAgICAgIGlmIChldmVudC5zaGlmdEtleSkge1xuICAgICAgICAgICAgbGF6eVJlc3VsdC5zaGlmdFNlbGVjdCgpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxhenlSZXN1bHQuY29udHJvbFNlbGVjdCgpXG4gICAgICAgICAgfVxuICAgICAgICB9fVxuICAgICAgICBmb2N1c1Zpc2libGVDbGFzc05hbWU9XCJmb2N1cy12aXNpYmxlXCJcbiAgICAgICAgY2xhc3NOYW1lPVwicmVsYXRpdmUgcC0yIG1pbi13LTAgb3V0bGluZS1ub25lIGgtZnVsbCBncm91cC9jaGVja2JveCBzaHJpbmstMFwiXG4gICAgICA+XG4gICAgICAgIHsoKCkgPT4ge1xuICAgICAgICAgIGlmIChpc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7ZXh0cmFDbGFzc2VzfSBhYnNvbHV0ZSB3LWZ1bGwgaC1mdWxsIGxlZnQtMCB0b3AtMCBvcGFjaXR5LTAgdHJhbnNmb3JtIHRyYW5zaXRpb24gZHVyYXRpb24tMjAwIGVhc2UtaW4tb3V0IC10cmFuc2xhdGUteC1mdWxsIGdyb3VwLWhvdmVyL2NoZWNrYm94OnNjYWxlLTEwMGB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPENoZWNrQm94SWNvbiBjbGFzc05hbWU9XCJncm91cC1ob3Zlci9jaGVja2JveDpibG9jayBncm91cC1mb2N1cy12aXNpYmxlL2NoZWNrYm94OmJsb2NrIGhpZGRlblwiIC8+XG4gICAgICAgICAgICAgICAgICA8Q2hlY2tJY29uIGNsYXNzTmFtZT1cImdyb3VwLWhvdmVyL2NoZWNrYm94OmhpZGRlbiBncm91cC1mb2N1cy12aXNpYmxlL2NoZWNrYm94OmhpZGRlbiBibG9ja1wiIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtleHRyYUNsYXNzZXN9IHRyYW5zZm9ybSB0cmFuc2l0aW9uIGR1cmF0aW9uLTIwMCBlYXNlLWluLW91dCAtdHJhbnNsYXRlLXgtZnVsbCBncm91cC1mb2N1cy12aXNpYmxlL2NoZWNrYm94OiF0cmFuc2xhdGUteC0wIGdyb3VwLWhvdmVyL2NoZWNrYm94OiF0cmFuc2xhdGUteC0wIGdyb3VwLWhvdmVyL2NoZWNrYm94OnNjYWxlLTEwMGB9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPENoZWNrQm94SWNvbiBjbGFzc05hbWU9XCJncm91cC1ob3Zlci9jaGVja2JveDpibG9jayBncm91cC1mb2N1cy12aXNpYmxlL2NoZWNrYm94OmJsb2NrIGhpZGRlblwiIC8+XG4gICAgICAgICAgICAgICAgICA8Q2hlY2tJY29uIGNsYXNzTmFtZT1cImdyb3VwLWhvdmVyL2NoZWNrYm94OmhpZGRlbiBncm91cC1mb2N1cy12aXNpYmxlL2NoZWNrYm94OmhpZGRlbiBibG9ja1wiIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0gZWxzZSBpZiAoIWlzU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidHJhbnNmb3JtIFwiPlxuICAgICAgICAgICAgICAgIDxDaGVja0JveE91dGxpbmVCbGFua0ljb25cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGdyb3VwLWhvdmVyL2NoZWNrYm94OnZpc2libGUgZ3JvdXAtZm9jdXMtdmlzaWJsZS9jaGVja2JveDp2aXNpYmxlIGludmlzaWJsZWB9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgIH0pKCl9XG4gICAgICAgIDxzcGFuXG4gICAgICAgICAgY2xhc3NOYW1lPXtgJHtnZXRJY29uQ2xhc3NOYW1lKHtcbiAgICAgICAgICAgIGxhenlSZXN1bHQsXG4gICAgICAgICAgfSl9IGZvbnQtYXdlc29tZS1zcGFuIGdyb3VwLWZvY3VzLXZpc2libGUvY2hlY2tib3g6aW52aXNpYmxlIGdyb3VwLWhvdmVyL2NoZWNrYm94OmludmlzaWJsZSBhYnNvbHV0ZSB6LTAgbGVmdC0xLzIgdG9wLTEvMiB0cmFuc2Zvcm0gLXRyYW5zbGF0ZS14LTEvMiAtdHJhbnNsYXRlLXktMS8yYH1cbiAgICAgICAgICBkYXRhLWhlbHA9e01ldGFjYXJkRGVmaW5pdGlvbnMuZ2V0QWxpYXMoJ3RpdGxlJyl9XG4gICAgICAgICAgdGl0bGU9e2Ake01ldGFjYXJkRGVmaW5pdGlvbnMuZ2V0QWxpYXMoJ3RpdGxlJyl9OiAke1xuICAgICAgICAgICAgbGF6eVJlc3VsdC5wbGFpbi5tZXRhY2FyZC5wcm9wZXJ0aWVzLnRpdGxlXG4gICAgICAgICAgfWB9XG4gICAgICAgIC8+XG4gICAgICA8L0J1dHRvbj5cbiAgICA8Lz5cbiAgKVxufVxuLy8gZmFjdG9yZWQgb3V0IGZvciBlYXN5IGRlYnVnZ2luZyAoY2FuIGFkZCBiZy1ncmF5LTQwMCB0byBzZWUgdHJhaWwpXG5jb25zdCBkaWFnb25hbEhvdmVyQ2xhc3NlcyA9XG4gICdhYnNvbHV0ZSB6LTUwIHJpZ2h0LTAgYm90dG9tLTEwMCBoLTQgdHJhbnNmb3JtIHNjYWxlLTAgZ3JvdXAtaG92ZXI6c2NhbGUtMTAwIHRyYW5zaXRpb24tYWxsIGFic29sdXRlIHotNTAgcmlnaHQtMCBib3R0b20tMTAwJ1xuLy8gZmFrZSBldmVudCB0byBwYXNzIHJpcHBsZS5zdG9wXG5jb25zdCBmYWtlRXZlbnQgPSB7XG4gIHR5cGU6ICcnLFxufSBhcyBhbnlcbmV4cG9ydCBjb25zdCBSZXN1bHRJdGVtID0gKHtcbiAgbGF6eVJlc3VsdCxcbiAgbWVhc3VyZTogb3JpZ2luYWxNZWFzdXJlLFxuICBzZWxlY3Rpb25JbnRlcmZhY2UsXG59OiBSZXN1bHRJdGVtRnVsbFByb3BzKSA9PiB7XG4gIGNvbnN0IHsgZ2V0VmFsdWUsIG9uU3RhdGVDaGFuZ2VkIH0gPSBSZWFjdC51c2VDb250ZXh0KExheW91dENvbnRleHQpXG4gIGNvbnN0IE1ldGFjYXJkRGVmaW5pdGlvbnMgPSB1c2VNZXRhY2FyZERlZmluaXRpb25zKClcbiAgY29uc3QgcmlwcGxlUmVmID0gUmVhY3QudXNlUmVmPHtcbiAgICBwdWxzYXRlOiAoKSA9PiB2b2lkXG4gICAgc3RvcDogKGU6IGFueSkgPT4gdm9pZFxuICAgIHN0YXJ0OiAoZTogYW55KSA9PiB2b2lkXG4gIH0+KG51bGwpXG4gIGNvbnN0IHsgbGlzdGVuVG8gfSA9IHVzZUJhY2tib25lKClcbiAgY29uc3QgY29udmVydFRvUHJlY2lzaW9uID0gKHZhbHVlOiBhbnkpID0+IHtcbiAgICByZXR1cm4gdmFsdWUgJiYgZGVjaW1hbFByZWNpc2lvblxuICAgICAgPyBOdW1iZXIodmFsdWUpLnRvRml4ZWQoZGVjaW1hbFByZWNpc2lvbilcbiAgICAgIDogdmFsdWVcbiAgfVxuICBjb25zdCBjb252ZXJ0VG9Gb3JtYXQgPSB1c2VDb29yZGluYXRlRm9ybWF0KClcbiAgY29uc3QgW3JlbmRlckV4dHJhcywgc2V0UmVuZGVyRXh0cmFzXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKSAvLyBkeW5hbWljIGFjdGlvbnMgYXJlIGEgc2lnbmlmaWNhbnQgcGFydCBvZiByZW5kZXJpbmcgdGltZSwgc28gZGVsYXkgdW50aWwgbmVjZXNzYXJ5XG4gIGNvbnN0IFtkZWNpbWFsUHJlY2lzaW9uLCBzZXREZWNpbWFsUHJlY2lzaW9uXSA9IFJlYWN0LnVzZVN0YXRlKFxuICAgIFR5cGVkVXNlckluc3RhbmNlLmdldERlY2ltYWxQcmVjaXNpb24oKVxuICApXG4gIGNvbnN0IFtzaG93bkF0dHJpYnV0ZXMsIHNldFNob3duQXR0cmlidXRlc10gPSBSZWFjdC51c2VTdGF0ZShcbiAgICBnZXRWYWx1ZShSRVNVTFRTX0FUVFJJQlVURVNfTElTVCwgZ2V0RGVmYXVsdFJlc3VsdHNTaG93bkxpc3QoKSkgYXMgc3RyaW5nW11cbiAgKVxuICB1c2VSZXJlbmRlck9uQmFja2JvbmVTeW5jKHsgbGF6eVJlc3VsdCB9KVxuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGlzdGVuVG8oXG4gICAgICB1c2VyLmdldCgndXNlcicpLmdldCgncHJlZmVyZW5jZXMnKSxcbiAgICAgICdjaGFuZ2U6ZGVjaW1hbFByZWNpc2lvbicsXG4gICAgICAoKSA9PiB7XG4gICAgICAgIHNldERlY2ltYWxQcmVjaXNpb24oVHlwZWRVc2VySW5zdGFuY2UuZ2V0RGVjaW1hbFByZWNpc2lvbigpKVxuICAgICAgfVxuICAgIClcbiAgICBvblN0YXRlQ2hhbmdlZCgoKSA9PiB7XG4gICAgICBjb25zdCBzaG93bkxpc3QgPSBnZXRWYWx1ZShcbiAgICAgICAgUkVTVUxUU19BVFRSSUJVVEVTX0xJU1QsXG4gICAgICAgIGdldERlZmF1bHRSZXN1bHRzU2hvd25MaXN0KClcbiAgICAgIClcbiAgICAgIHNldFNob3duQXR0cmlidXRlcyhzaG93bkxpc3QpXG4gICAgfSlcbiAgfSwgW10pXG5cbiAgLyoqXG4gICAqIFVuZm9jdXNlZCAoaGlkZGVuKSB0YWIgc2V0cyB0aGUgY29udGFpbmVyIGhlaWdodCB0byAwXG4gICAqIFJ1biB0aGUgbWVhc3VyZSBmdW5jdGlvbiB3aGVuIHRoZSBoZWlnaHQgaXMgMCBjb3VsZCBjYXVzZSBpdGVtcyBpbnNpZGUgdGhlIHRhYiB0byBiZSB1bnJlYWRhYmxlXG4gICAqL1xuICBjb25zdCBtZWFzdXJlID0gKCkgPT4ge1xuICAgIGlmIChcbiAgICAgIGJ1dHRvblJlZi5jdXJyZW50Py5jbGllbnRIZWlnaHQgJiZcbiAgICAgIGJ1dHRvblJlZi5jdXJyZW50Py5jbGllbnRIZWlnaHQgPiAwXG4gICAgKSB7XG4gICAgICBvcmlnaW5hbE1lYXN1cmUoKVxuICAgIH1cbiAgfVxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIG1lYXN1cmUoKVxuICB9LCBbc2hvd25BdHRyaWJ1dGVzLCBjb252ZXJ0VG9Gb3JtYXRdKVxuICBsaXN0ZW5Ubyh3cmVxci52ZW50LCAnYWN0aXZlQ29udGVudEl0ZW1DaGFuZ2VkJywgKCkgPT4ge1xuICAgIG1lYXN1cmUoKVxuICB9KVxuICBjb25zdCB0aHVtYm5haWwgPSBsYXp5UmVzdWx0LnBsYWluLm1ldGFjYXJkLnByb3BlcnRpZXMudGh1bWJuYWlsXG4gIGNvbnN0IGltZ3NyYyA9IENvbW1vbi5nZXRJbWFnZVNyYyh0aHVtYm5haWwpXG4gIGNvbnN0IGJ1dHRvblJlZiA9IFJlYWN0LnVzZVJlZjxIVE1MQnV0dG9uRWxlbWVudD4obnVsbClcbiAgY29uc3QgaXRlbUNvbnRlbnRSZWYgPSBSZWFjdC51c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpXG5cbiAgY29uc3QgUmVzdWx0SXRlbUFkZE9uSW5zdGFuY2UgPSBFeHRlbnNpb25zLnJlc3VsdEl0ZW1Sb3dBZGRPbih7XG4gICAgbGF6eVJlc3VsdCxcbiAgICBpc1RhYmxlVmlldzogZmFsc2UsXG4gIH0pXG4gIGNvbnN0IFJlc3VsdFRpdGxlSWNvbkFkZE9uSW5zdGFuY2UgPSBFeHRlbnNpb25zLnJlc3VsdFRpdGxlSWNvbkFkZE9uKHtcbiAgICBsYXp5UmVzdWx0LFxuICB9KVxuXG4gIGNvbnN0IHNob3VsZFNob3dSZWxldmFuY2UgPSBzaG93UmVsZXZhbmNlU2NvcmUoeyBsYXp5UmVzdWx0IH0pXG4gIGNvbnN0IHNob3VsZFNob3dTb3VyY2UgPSBzaG93U291cmNlKClcbiAgY29uc3QgZXh0cmFIaWdobGlnaHRzID0gT2JqZWN0LmtleXMobGF6eVJlc3VsdC5oaWdobGlnaHRzKS5maWx0ZXIoXG4gICAgKGF0dHIpID0+ICFzaG93bkF0dHJpYnV0ZXMuZmluZCgoc2hvd25BdHRyaWJ1dGUpID0+IHNob3duQXR0cmlidXRlID09PSBhdHRyKVxuICApXG4gIGNvbnN0IGdldERpc3BsYXlWYWx1ZSA9ICh7XG4gICAgZGV0YWlsLFxuICAgIGxhenlSZXN1bHQsXG4gIH06IHtcbiAgICBkZXRhaWw6IHN0cmluZ1xuICAgIGxhenlSZXN1bHQ6IExhenlRdWVyeVJlc3VsdFxuICB9KSA9PiB7XG4gICAgbGV0IHZhbHVlID0gbGF6eVJlc3VsdC5wbGFpbi5tZXRhY2FyZC5wcm9wZXJ0aWVzW2RldGFpbF1cbiAgICBpZiAodmFsdWUgJiYgTWV0YWNhcmREZWZpbml0aW9ucy5nZXRBdHRyaWJ1dGVNYXAoKVtkZXRhaWxdKSB7XG4gICAgICBzd2l0Y2ggKE1ldGFjYXJkRGVmaW5pdGlvbnMuZ2V0QXR0cmlidXRlTWFwKClbZGV0YWlsXS50eXBlKSB7XG4gICAgICAgIGNhc2UgJ0RBVEUnOlxuICAgICAgICAgIGlmICh2YWx1ZS5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUubWFwKCh2YWw6IGFueSkgPT5cbiAgICAgICAgICAgICAgVHlwZWRVc2VySW5zdGFuY2UuZ2V0TW9tZW50RGF0ZSh2YWwpXG4gICAgICAgICAgICApXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhbHVlID0gVHlwZWRVc2VySW5zdGFuY2UuZ2V0TW9tZW50RGF0ZSh2YWx1ZSlcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnR0VPTUVUUlknOlxuICAgICAgICAgIHZhbHVlID0gY29udmVydFRvRm9ybWF0KHZhbHVlKVxuICAgICAgICBjYXNlICdMT05HJzpcbiAgICAgICAgY2FzZSAnRE9VQkxFJzpcbiAgICAgICAgY2FzZSAnRkxPQVQnOlxuICAgICAgICAgIHZhbHVlID0gY29udmVydFRvUHJlY2lzaW9uKHZhbHVlKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUuam9pbignLCAnKVxuICAgIH1cbiAgICByZXR1cm4gdmFsdWVcbiAgfVxuICBjb25zdCBkZXRhaWxzTWFwID0gc2hvd25BdHRyaWJ1dGVzXG4gICAgLnNsaWNlKDEpIC8vIHJlbW92ZSB0b3Agb25lIHNpbmNlIHRoYXQncyBzcGVjaWFsXG4gICAgLm1hcCgoZGV0YWlsKSA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBhdHRyaWJ1dGU6IGRldGFpbCxcbiAgICAgICAgdmFsdWU6IGdldERpc3BsYXlWYWx1ZSh7IGRldGFpbCwgbGF6eVJlc3VsdCB9KSxcbiAgICAgIH1cbiAgICB9KVxuICAgIC5maWx0ZXIoKGRldGFpbCkgPT4ge1xuICAgICAgLy8gdGhpcyBpcyBzcGVjaWFsIGFuZCBpcyBoYW5kbGVkIGRpZmZlcmVudGx5LCBzZWUgc2hvdyBzb3VyY2VcbiAgICAgIGlmIChkZXRhaWwuYXR0cmlidXRlID09PSAnc291cmNlLWlkJykge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIHJldHVybiBkZXRhaWwudmFsdWVcbiAgICB9KVxuICByZXR1cm4gKFxuICAgIDxidXR0b25cbiAgICAgIGRhdGEtaWQ9XCJyZXN1bHQtaXRlbS1jb250YWluZXItYnV0dG9uXCJcbiAgICAgIG9uTW91c2VEb3duPXsoZXZlbnQ6IGFueSkgPT4ge1xuICAgICAgICAvKipcbiAgICAgICAgICogU2hpZnQga2V5IGNhbiBjYXVzZSBzZWxlY3Rpb25zIHNpbmNlIHdlIHNldCB0aGUgY2xhc3MgdG8gYWxsb3cgdGV4dCBzZWxlY3Rpb24sXG4gICAgICAgICAqIHNvIHRoZSBvbmx5IHNjZW5hcmlvIHdlIHdhbnQgdG8gcHJldmVudCB0aGF0IGluIGlzIHdoZW4gc2hpZnQgY2xpY2tpbmdcbiAgICAgICAgICovXG4gICAgICAgIGlmIChldmVudC5zaGlmdEtleSkge1xuICAgICAgICAgIGNsZWFyU2VsZWN0aW9uKClcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogU3RvcCB0aGUgcmlwcGxlIHRoYXQgc3RhcnRzIG9uIGZvY3VzLCB0aGF0J3Mgb25seSBmb3IgbmF2aWdhdGluZyBieSBrZXlib2FyZFxuICAgICAgICAgKi9cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgaWYgKHJpcHBsZVJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICByaXBwbGVSZWYuY3VycmVudC5zdG9wKGZha2VFdmVudClcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDApXG4gICAgICB9fVxuICAgICAgb25DbGljaz17KGV2ZW50OiBhbnkpID0+IHtcbiAgICAgICAgaWYgKGhhc1NlbGVjdGlvbigpKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICAgICAgbGF6eVJlc3VsdC5zaGlmdFNlbGVjdCgpXG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5KSB7XG4gICAgICAgICAgbGF6eVJlc3VsdC5jb250cm9sU2VsZWN0KClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsYXp5UmVzdWx0LnNlbGVjdCgpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJpcHBsZVJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgcmlwcGxlUmVmLmN1cnJlbnQuc3RhcnQoZXZlbnQpXG4gICAgICAgIH1cbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgaWYgKHJpcHBsZVJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICByaXBwbGVSZWYuY3VycmVudC5zdG9wKGZha2VFdmVudClcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDIwMClcbiAgICAgIH19XG4gICAgICBvbk1vdXNlTGVhdmU9eygpID0+IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgaXMgdG8gcHJldmVudCB3ZWlyZG5lc3Mgd2l0aCB0aGUgZHluYW1pYyBhY3Rpb25zLCB3aGVyZSBjbGlja2luZyBhIG1lbnUgb3B0aW9uIHRoZXJlIGFkZHMgZm9jdXMsXG4gICAgICAgICAqIHRodXMgbWFraW5nIHRoZSBkeW5hbWljIGFjdGlvbnMgc3RheSB2aXNpYmxlIHdoZW4gdGhlIHVzZXIgc3RhcnRzIHRvIG1vdXNlIGF3YXkuXG4gICAgICAgICAqL1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiZcbiAgICAgICAgICAgIGJ1dHRvblJlZi5jdXJyZW50ICYmXG4gICAgICAgICAgICBidXR0b25SZWYuY3VycmVudC5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgOyhkb2N1bWVudC5hY3RpdmVFbGVtZW50IGFzIGFueSkuYmx1cigpXG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycilcbiAgICAgICAgfVxuICAgICAgfX1cbiAgICAgIG9uTW91c2VFbnRlcj17KCkgPT4ge1xuICAgICAgICBzZXRSZW5kZXJFeHRyYXModHJ1ZSlcbiAgICAgIH19XG4gICAgICBvbkZvY3VzPXsoZTogYW55KSA9PiB7XG4gICAgICAgIHNldFJlbmRlckV4dHJhcyh0cnVlKVxuICAgICAgICBpZiAoZS50YXJnZXQgPT09IGUuY3VycmVudFRhcmdldCAmJiByaXBwbGVSZWYuY3VycmVudCkge1xuICAgICAgICAgIHJpcHBsZVJlZi5jdXJyZW50LnB1bHNhdGUoKVxuICAgICAgICB9XG4gICAgICB9fVxuICAgICAgb25CbHVyPXsoZTogYW55KSA9PiB7XG4gICAgICAgIGlmIChyaXBwbGVSZWYuY3VycmVudCkge1xuICAgICAgICAgIHJpcHBsZVJlZi5jdXJyZW50LnN0b3AoZSlcbiAgICAgICAgfVxuICAgICAgfX1cbiAgICAgIHJlZj17YnV0dG9uUmVmfVxuICAgICAgY2xhc3NOYW1lPXtgc2VsZWN0LXRleHQgb3V0bGluZS1ub25lIHB4LTYgcHItMTIgcC0yIHRleHQtbGVmdCBicmVhay13b3JkcyBncm91cCB3LWZ1bGwgTXVpLWJnLWJ1dHRvbmB9XG4gICAgPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGxcIj5cbiAgICAgICAgPFRvdWNoUmlwcGxlIHJlZj17cmlwcGxlUmVmfSAvPlxuICAgICAgICA8U2VsZWN0aW9uQmFja2dyb3VuZCBsYXp5UmVzdWx0PXtsYXp5UmVzdWx0fSAvPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCByZWxhdGl2ZSB6LTBcIiByZWY9e2l0ZW1Db250ZW50UmVmfT5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBmbGV4IGl0ZW1zLXN0YXJ0XCI+XG4gICAgICAgICAgICA8SWNvbkJ1dHRvblxuICAgICAgICAgICAgICBsYXp5UmVzdWx0PXtsYXp5UmVzdWx0fVxuICAgICAgICAgICAgICBzZWxlY3Rpb25JbnRlcmZhY2U9e3NlbGVjdGlvbkludGVyZmFjZX1cbiAgICAgICAgICAgICAgaXRlbUNvbnRlbnRSZWY9e2l0ZW1Db250ZW50UmVmfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIHtSZXN1bHRUaXRsZUljb25BZGRPbkluc3RhbmNlICYmIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwdC0yIHByLTFcIj57UmVzdWx0VGl0bGVJY29uQWRkT25JbnN0YW5jZX08L2Rpdj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIGRhdGEtaWQ9e2ByZXN1bHQtaXRlbS0ke3Nob3duQXR0cmlidXRlc1swXX0tbGFiZWxgfVxuICAgICAgICAgICAgICB0aXRsZT17YCR7TWV0YWNhcmREZWZpbml0aW9ucy5nZXRBbGlhcyhzaG93bkF0dHJpYnV0ZXNbMF0pfWB9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInNocmluay0xIHctZnVsbCBvdmVyZmxvdy1hdXRvIHNlbGYtY2VudGVyXCJcbiAgICAgICAgICAgICAgc3R5bGU9e3sgbWF4SGVpZ2h0OiAnMjAwcHgnLCBtaW5IZWlnaHQ6ICcyMXB4JyB9fSAvLyBmaXJlZm94IHdpbGwgc2hvdyBzY3JvbGxiYXJzIGFsd2F5cyB3aXRob3V0IHRoaXMgbWluSGVpZ2h0IDpTXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtzaG93bkF0dHJpYnV0ZXNbMF0gPT09ICd0aHVtYm5haWwnICYmIHRodW1ibmFpbCA/IChcbiAgICAgICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgICAgICBkYXRhLWlkPVwicmVzdWx0LWl0ZW0tdGh1bWJuYWlsXCJcbiAgICAgICAgICAgICAgICAgIHNyYz17aW1nc3JjfVxuICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWF4V2lkdGg6ICcxMDAlJywgbWF4SGVpZ2h0OiAnMjAwcHgnIH19XG4gICAgICAgICAgICAgICAgICBvbkxvYWQ9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbWVhc3VyZSgpXG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgb25FcnJvcj17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBtZWFzdXJlKClcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKSA6IGxhenlSZXN1bHQuaGlnaGxpZ2h0c1tzaG93bkF0dHJpYnV0ZXNbMF1dID8gKFxuICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17e1xuICAgICAgICAgICAgICAgICAgICBfX2h0bWw6XG4gICAgICAgICAgICAgICAgICAgICAgbGF6eVJlc3VsdC5oaWdobGlnaHRzW3Nob3duQXR0cmlidXRlc1swXV1bMF0uaGlnaGxpZ2h0LFxuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIGdldERpc3BsYXlWYWx1ZSh7IGRldGFpbDogc2hvd25BdHRyaWJ1dGVzWzBdLCBsYXp5UmVzdWx0IH0pXG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzc05hbWU9e2BwbC0zICR7XG4gICAgICAgICAgICAgIFJlc3VsdEl0ZW1BZGRPbkluc3RhbmNlICE9PSBudWxsIHx8XG4gICAgICAgICAgICAgIGRldGFpbHNNYXAubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICBleHRyYUhpZ2hsaWdodHMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICBzaG91bGRTaG93UmVsZXZhbmNlIHx8XG4gICAgICAgICAgICAgIHNob3VsZFNob3dTb3VyY2VcbiAgICAgICAgICAgICAgICA/ICdwYi0yJ1xuICAgICAgICAgICAgICAgIDogJydcbiAgICAgICAgICAgIH1gfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXY+e1Jlc3VsdEl0ZW1BZGRPbkluc3RhbmNlfTwvZGl2PlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAge2RldGFpbHNNYXAubWFwKChkZXRhaWwpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZGV0YWlsLmF0dHJpYnV0ZSA9PT0gJ3RodW1ibmFpbCcpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgICBrZXk9e2RldGFpbC5hdHRyaWJ1dGV9XG4gICAgICAgICAgICAgICAgICAgICAgZGF0YS1pZD1cInJlc3VsdC1pdGVtLXRodW1ibmFpbFwiXG4gICAgICAgICAgICAgICAgICAgICAgc3JjPXtpbWdzcmN9XG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblRvcDogJzEwcHgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4V2lkdGg6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heEhlaWdodDogJzIwMHB4JyxcbiAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgIG9uTG9hZD17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVhc3VyZSgpXG4gICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICBvbkVycm9yPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZWFzdXJlKClcbiAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgPFByb3BlcnR5Q29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgIGtleT17ZGV0YWlsLmF0dHJpYnV0ZX1cbiAgICAgICAgICAgICAgICAgICAgZGF0YS1oZWxwPXtNZXRhY2FyZERlZmluaXRpb25zLmdldEFsaWFzKGRldGFpbC5hdHRyaWJ1dGUpfVxuICAgICAgICAgICAgICAgICAgICB0aXRsZT17YCR7TWV0YWNhcmREZWZpbml0aW9ucy5nZXRBbGlhcyhcbiAgICAgICAgICAgICAgICAgICAgICBkZXRhaWwuYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgICAgICl9OiAke2RldGFpbC52YWx1ZX1gfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICB7LyogSXQncyBva2F5IHRvIHVzZSB0aGUgZmlyc3Qgb25lIGhlcmUgc2luY2Ugd2Ugb25seSBldmVyIHdhbnQgdG8gZGlzcGxheSBvbmUsIG5vcm1hbGx5IHlvdSdkIHdhbnQgdG8gbWFwIG92ZXIgdGhpcyBsaXN0ICovfVxuICAgICAgICAgICAgICAgICAgICAgIHtsYXp5UmVzdWx0LmhpZ2hsaWdodHNbZGV0YWlsLmF0dHJpYnV0ZV0gPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9faHRtbDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhenlSZXN1bHQuaGlnaGxpZ2h0c1tkZXRhaWwuYXR0cmlidXRlXVswXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaGlnaGxpZ2h0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0RGlzcGxheVZhbHVlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiBkZXRhaWwuYXR0cmlidXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBsYXp5UmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8L1Byb3BlcnR5Q29tcG9uZW50PlxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIHtleHRyYUhpZ2hsaWdodHMubWFwKChleHRyYUhpZ2hsaWdodCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbGV2YW50SGlnaGxpZ2h0ID1cbiAgICAgICAgICAgICAgICAgIGxhenlSZXN1bHQuaGlnaGxpZ2h0c1tleHRyYUhpZ2hsaWdodF1bMF1cbiAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgPFByb3BlcnR5Q29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgIGtleT17cmVsZXZhbnRIaWdobGlnaHQuYXR0cmlidXRlfVxuICAgICAgICAgICAgICAgICAgICBkYXRhLWhlbHA9e01ldGFjYXJkRGVmaW5pdGlvbnMuZ2V0QWxpYXMoXG4gICAgICAgICAgICAgICAgICAgICAgcmVsZXZhbnRIaWdobGlnaHQuYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxUb29sdGlwXG4gICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e01ldGFjYXJkRGVmaW5pdGlvbnMuZ2V0QWxpYXMoXG4gICAgICAgICAgICAgICAgICAgICAgICByZWxldmFudEhpZ2hsaWdodC5hdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIF9faHRtbDogcmVsZXZhbnRIaWdobGlnaHQuaGlnaGxpZ2h0LFxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8L1Rvb2x0aXA+XG4gICAgICAgICAgICAgICAgICA8L1Byb3BlcnR5Q29tcG9uZW50PlxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIHtzaG91bGRTaG93UmVsZXZhbmNlID8gKFxuICAgICAgICAgICAgICAgIDxQcm9wZXJ0eUNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgZGF0YS1oZWxwPXtgUmVsZXZhbmNlOiAke2xhenlSZXN1bHQucGxhaW4ucmVsZXZhbmNlfWB9XG4gICAgICAgICAgICAgICAgICB0aXRsZT17YFJlbGV2YW5jZTogJHtsYXp5UmVzdWx0LnBsYWluLnJlbGV2YW5jZX1gfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxzcGFuPntsYXp5UmVzdWx0LmdldFJvdW5kZWRSZWxldmFuY2UoKX08L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9Qcm9wZXJ0eUNvbXBvbmVudD5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAnJ1xuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICB7c2hvdWxkU2hvd1NvdXJjZSA/IChcbiAgICAgICAgICAgICAgICA8UHJvcGVydHlDb21wb25lbnRcbiAgICAgICAgICAgICAgICAgIHRpdGxlPXtgJHtNZXRhY2FyZERlZmluaXRpb25zLmdldEFsaWFzKCdzb3VyY2UtaWQnKX06ICR7XG4gICAgICAgICAgICAgICAgICAgIGxhenlSZXN1bHQucGxhaW4ubWV0YWNhcmQucHJvcGVydGllc1snc291cmNlLWlkJ11cbiAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgZGF0YS1oZWxwPXtNZXRhY2FyZERlZmluaXRpb25zLmdldEFsaWFzKCdzb3VyY2UtaWQnKX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7IWxhenlSZXN1bHQuaXNSZW1vdGUoKSA/IChcbiAgICAgICAgICAgICAgICAgICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZhIGZhLWhvbWVcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IG1hcmdpbkxlZnQ6ICc1cHgnIH19PmxvY2FsPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZhIGZhLWNsb3VkXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT17eyBtYXJnaW5MZWZ0OiAnNXB4JyB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtsYXp5UmVzdWx0LnBsYWluLm1ldGFjYXJkLnByb3BlcnRpZXNbJ3NvdXJjZS1pZCddfVxuICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9Qcm9wZXJ0eUNvbXBvbmVudD5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAnJ1xuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7cmVuZGVyRXh0cmFzID8gKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgICB7JyAnfVxuICAgICAgICAgICAgey8qIHRyaWNrIHRvIGtlZXAgdGhlIGRyb3Bkb3duIHZpc2libGUgb3ZlciBhbiBhcmMgb2YgdGhlIGN1cnNvciwgc28gdXNlcnMgaGF2ZSBzb21lIGxlZXdheSBpZiBnb2luZyBkaWFnb25hbCB0byB0aGUgYWN0aW9ucyBkcm9wZG93bnMgKiovfVxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake2RpYWdvbmFsSG92ZXJDbGFzc2VzfSB3LWZ1bGwgdHJhbnNmb3JtIHRyYW5zbGF0ZS15LTFgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtkaWFnb25hbEhvdmVyQ2xhc3Nlc30gdy05LzEyIHRyYW5zZm9ybSB0cmFuc2xhdGUteS0yIGB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake2RpYWdvbmFsSG92ZXJDbGFzc2VzfSB3LTYvMTIgdHJhbnNmb3JtIHRyYW5zbGF0ZS15LTNgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtkaWFnb25hbEhvdmVyQ2xhc3Nlc30gdy01LzEyIHRyYW5zZm9ybSB0cmFuc2xhdGUteS00YH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7ZGlhZ29uYWxIb3ZlckNsYXNzZXN9IHctNC8xMiB0cmFuc2Zvcm0gdHJhbnNsYXRlLXktNWB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake2RpYWdvbmFsSG92ZXJDbGFzc2VzfSB3LTMvMTIgdHJhbnNmb3JtIHRyYW5zbGF0ZS15LTZgfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtkaWFnb25hbEhvdmVyQ2xhc3Nlc30gdy0yLzEyIHRyYW5zZm9ybSB0cmFuc2xhdGUteS04YH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YGFic29sdXRlIHotNDAgZ3JvdXAtaG92ZXI6ei01MCBmb2N1cy13aXRoaW46ei01MCByaWdodC0wIHRvcC0wIGZvY3VzLXdpdGhpbjpvcGFjaXR5LTEwMCBncm91cC1ob3ZlcjpvcGFjaXR5LTEwMCBob3ZlcjpvcGFjaXR5LTEwMCBvcGFjaXR5LTAgY3Vyc29yLWF1dG8gdHJhbnNmb3JtIGZvY3VzLXdpdGhpbjpzY2FsZS0xMDAgdHJhbnNpdGlvbi1hbGwgaG92ZXI6c2NhbGUtMTAwIGVhc2UtaW4tb3V0IGR1cmF0aW9uLTIwMCBob3Zlcjp0cmFuc2xhdGUteC0wIGhvdmVyOnNjYWxlLXgtMTAwYH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFBhcGVyXG4gICAgICAgICAgICAgICAgb25DbGljaz17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIGVsZXZhdGlvbj17RWxldmF0aW9ucy5vdmVybGF5c31cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJwLTJcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPER5bmFtaWNBY3Rpb25zIGxhenlSZXN1bHQ9e2xhenlSZXN1bHR9IC8+XG4gICAgICAgICAgICAgIDwvUGFwZXI+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8Lz5cbiAgICAgICAgKSA6IG51bGx9XG4gICAgICA8L2Rpdj5cbiAgICA8L2J1dHRvbj5cbiAgKVxufVxuZXhwb3J0IGRlZmF1bHQgaG90KG1vZHVsZSkoUmVzdWx0SXRlbSlcbiJdfQ==